@layer base, components, utilities;

@import "tailwindcss";
@import "tw-animate-css";

/* Hide scrollbar for Chrome, Safari, and Opera */
::-webkit-scrollbar {
  display: none;
}

/* Hide scrollbar for IE, Edge, and Firefox */
html {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}

/* ------------------------------------------------------------
   GLOBAL BRAND + THEME TOKENS
   ------------------------------------------------------------ */
@custom-variant dark (&:is(.dark *));

:root {
  /* ── Brand Colors ───────────────────────────── */
  --brand-gold: oklch(0.83 0.17 95); /* #FFC931 */
  --brand-cyan: oklch(0.78 0.19 210); /* #00CFF2 */
  --brand-black: #1e1e1e;
  --brand-pink: oklch(0.73 0.22 342); /* #FB72FF */

  --brand-ink-950: oklch(0.12 0 0); /* Black */
  --brand-ink-900: oklch(0.19 0 0); /* Dark Gray */
  --brand-ink-800: oklch(0.24 0 0); /* Medium Gray */
  --brand-white: oklch(1 0 0); /* White */

  /* ── Alpha Utilities ────────────────────────── */
  --white-a07: #ffffff12;
  --white-a08: #ffffff14;
  --white-a10: #ffffff1a;
  --white-a13: #ffffff21;
  --white-a38: #ffffff61;

  /* ── Base Semantic Colors (light mode) ───────── */
  --surface-page: linear-gradient(180deg, var(--brand-ink-800) 0%, #000 100%);
  --surface-card: color-mix(in oklch, var(--brand-ink-800) 90%, #000 10%);
  --surface-popover: color-mix(in oklch, var(--brand-ink-800) 92%, #000 8%);
  --surface-tint: var(--white-a10);
  --surface-stroke: var(--white-a08);

  --text-primary: var(--brand-white);
  --text-muted: oklch(0.74 0 0); /* #99A0AE */

  --accent-solid: var(--brand-gold);
  --accent-soft: var(--white-a13);
  --accent-ring: var(--brand-gold);

  --success: #14b985;
  --danger: oklch(0.65 0.22 25);

  /* ── Sidebar Colors ─────────────────────────── */
  --sidebar-bg: var(--brand-white);
  --sidebar-fg: var(--brand-ink-900);
  --sidebar-primary: var(--brand-ink-800);
  --sidebar-primary-fg: var(--brand-white);
  --sidebar-accent: var(--white-a10);
  --sidebar-accent-fg: var(--brand-ink-900);
  --sidebar-border: #eaeaea;
  --sidebar-ring: #b5b5b5;

  /* ── Radii & Decorative BGs ─────────────────── */
  --radius-xs: 8px;
  --radius-sm: 12px;
  --radius-md: 16px;

  --gold-overlay: linear-gradient(
    189.66deg,
    rgba(0, 0, 0, 0) -6.71%,
    rgba(0, 0, 0, 0.8) 92.73%
  );
  --card-glint: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    color-mix(in oklch, var(--brand-gold) 25%, transparent) 100%
  );

  /* ── Dark Theme Defaults (fallbacks for base) ─ */
  --background: oklch(0.08 0 0);
  --foreground: oklch(0.98 0 0);
  --card: oklch(0.12 0 0);
  --card-foreground: oklch(0.98 0 0);
  --popover: oklch(0.1 0 0);
  --popover-foreground: oklch(0.98 0 0);
}

/* ------------------------------------------------------------
   DARK THEME OVERRIDES
   ------------------------------------------------------------ */
.dark {
  --surface-page: linear-gradient(180deg, var(--brand-ink-900) 0%, #000 100%);
  --surface-card: color-mix(in oklch, var(--brand-ink-900) 95%, #000 5%);
  --surface-popover: color-mix(in oklch, var(--brand-ink-900) 93%, #000 7%);
  --surface-tint: var(--white-a07);
  --surface-stroke: var(--white-a08);

  --text-primary: var(--brand-white);
  --text-muted: oklch(0.72 0 0);

  --accent-solid: var(--brand-gold);
  --accent-soft: var(--white-a10);
  --accent-ring: var(--brand-gold);
}

/* ------------------------------------------------------------
   TAILWIND THEME BRIDGE
   ------------------------------------------------------------ */
@theme inline {
  /* fonts */
  --font-display: var(--font-display);
  --font-body: var(--font-body);

  /* semantic colors */
  --color-background: var(--brand-black);
  --color-card: var(--surface-card);
  --color-popover: var(--surface-popover);
  --color-foreground: var(--text-primary);
  --color-muted: var(--text-muted);
  --color-primary: var(--accent-solid);
  --color-secondary: var(--brand-cyan);

  --color-border: var(--surface-stroke);
  --color-input: var(--surface-tint);
  --color-ring: var(--accent-ring);

  /* brand aliases */
  --color-waffle-gold: var(--brand-gold);
  --color-neon-cyan: var(--brand-cyan);
  --color-neon-pink: var(--brand-pink);
  --color-success: var(--success);
  --color-danger: var(--danger);

  /* radii */
  --radius-sm: var(--radius-xs);
  --radius-md: var(--radius-sm);
  --radius-lg: var(--radius-md);
}

/* ------------------------------------------------------------
   BASE LAYER
   ------------------------------------------------------------ */
@layer base {
  html,
  body {
    height: 100%;
  }
  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-body);
  }
}

/* ------------------------------------------------------------
   UTILITIES
   ------------------------------------------------------------ */

/* Page gradient background */
@utility app-background {
  background-color: var(--brand-black);
  background-attachment: fixed;
  background-repeat: no-repeat;
  background-size: cover;
}

/* Gold overlay card */
@utility bg-gold-overlay {
  background: var(--gold-overlay), var(--brand-gold);
  background-blend-mode: overlay, normal;
}

/* Card glint */
@utility bg-card-glint {
  background-image: var(--card-glint);
}

/* Subtle panel style */
@utility panel {
  background: var(--white-a10);
  border: 1px solid var(--surface-stroke);
  border-radius: var(--radius-md);
}

/* Neon glow */
@utility neon {
  text-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
}

/* Global transition curve */
@media (prefers-reduced-motion: no-preference) {
  * {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* ------------------------------------------------------------
   ANIMATIONS
   ------------------------------------------------------------ */
@keyframes glow-pulse {
  0%,
  100% {
    opacity: 1;
    filter: brightness(1);
  }
  50% {
    opacity: 0.85;
    filter: brightness(1.15);
  }
}

@keyframes slide-up {
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-in-x {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@utility animate-glow {
  animation: glow-pulse 2s ease-in-out infinite;
}
@utility animate-up {
  animation: slide-up 0.28s ease-out both;
}
@utility animate-in-right {
  animation: slide-in-x 0.28s ease-out both;
}

@utility pixel-corners {
  /* The precise polygon shape for the pixelated corners */
  clip-path: polygon(
    0px 12px,
    6px 12px,
    6px 6px,
    12px 6px,
    12px 0px,
    calc(100% - 12px) 0px,
    calc(100% - 12px) 6px,
    calc(100% - 6px) 6px,
    calc(100% - 6px) 12px,
    100% 12px,
    100% calc(100% - 12px),
    calc(100% - 6px) calc(100% - 12px),
    calc(100% - 6px) calc(100% - 6px),
    calc(100% - 12px) calc(100% - 6px),
    calc(100% - 12px) 100%,
    12px 100%,
    12px calc(100% - 6px),
    6px calc(100% - 6px),
    6px calc(100% - 12px),
    0% calc(100% - 12px)
  );
}

/* ───────────────────────── Base Interaction Animations ───────────────────────── */

/* Fade-in */
.fade-in {
  animation: fadeIn 0.6s ease forwards;
}
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Slide-up */
.slide-up {
  animation: slideUp 0.5s ease forwards;
}
@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Subtle scale pop for tap feedback */
.tap-pop {
  transition: transform 0.12s ease;
}
.tap-pop:active {
  transform: scale(0.96);
}

/*
================================================================================
Final Production CSS for Gradient + Noise Background (Revised for Robustness)
================================================================================
This implementation uses a pseudo-element for the noise overlay, which is a
more robust and common pattern for layering effects.
*/

.app-background {
  --gradient-color-start: #1e1e1e;
  --gradient-color-end: #000000;

  position: relative;
  background-color: var(--gradient-color-start);
  background-image: linear-gradient(
    to bottom,
    var(--gradient-color-start),
    var(--gradient-color-end)
  );
  min-height: 100vh;
  width: 100%;
  isolation: isolate;
}

.app-background::after {
  --noise-svg: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='1' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  --noise-opacity: 0.055;

  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  background-image: var(--noise-svg);
  opacity: var(--noise-opacity);

  pointer-events: none;

  z-index: -1;
}
